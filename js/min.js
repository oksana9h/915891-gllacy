(function(){var isStorageSupport=true;var storage='';try{storage=localStorage.getItem('login');if(storage.length>0){document.signinform.email.value=storage}}catch(err){isStorageSupport=false}document.querySelector('.search').addEventListener('click',toggle_form_search);document.querySelector('.search').addEventListener('mouseover',form_search_focus);document.querySelector('.sign-in-link').addEventListener('click',toggle_form_signin);document.querySelector('.sign-in-link').addEventListener('mouseover',form_signin_focus);document.signinform.addEventListener('submit',form_signin_submit);document.querySelector('.feedback-button').addEventListener('click',show_form_feedback);document.querySelector('.feedback-modal .modal-close').addEventListener('click',hide_form_feedback);window.addEventListener('keydown',close_form_esc);function close_form_esc(event){var e=event||window.event;if(e.keyCode===27){var modal=document.getElementsByClassName('modal-show');for(var i=0;i<modal.length;i++){console.log(i);if(modal[i].classList.contains('modal-show')){modal[i].classList.remove('modal-show');modal[i].classList.remove('modal-error');modal[i].classList.remove('shake')}}}}function toggle_form_search(){var modal=document.querySelector('.sign-in-modal');if(modal.classList.contains('modal-show')){modal.classList.remove('modal-show')}var modal=document.querySelector('.search-modal');if(modal.classList.contains('modal-show')){modal.classList.remove('modal-show')}else{modal.classList.add('modal-show')}}function form_search_focus(){search_visible_interval=setInterval(function(){var modal=document.querySelector('.search-modal');if(modal.offsetWidth>0||modal.offsetHeight>0){document.searchform.search.focus();clearInterval(search_visible_interval)}},0)}function toggle_form_signin(){var modal=document.querySelector('.search-modal');if(modal.classList.contains('modal-show')){modal.classList.remove('modal-show')}var modal=document.querySelector('.sign-in-modal');if(modal.classList.contains('modal-show')){modal.classList.remove('modal-show')}else{modal.classList.add('modal-show')}}function form_signin_focus(){login_visible_interval=setInterval(function(){var modal=document.querySelector('.sign-in-modal');if(modal.offsetWidth>0||modal.offsetHeight>0){if(storage&&storage.length>0){document.signinform.password.focus()}else{document.signinform.email.focus()}clearInterval(login_visible_interval)}},0)}function form_signin_submit(event){var e=event||window.event;e.preventDefault();var modal=document.querySelector('.sign-in-modal');if(document.signinform.email.value.length==0||document.signinform.password.value.length==0){modal.classList.add('modal-error');modal.classList.add('shake');setTimeout(function(){modal.classList.remove('shake')},200)}else{if(isStorageSupport){localStorage.setItem('login',document.signinform.email.value)}modal.classList.remove('shake');modal.classList.remove('modal-error');modal.classList.remove('modal-show')}}function show_form_feedback(){var e=event||window.event;e.preventDefault();document.querySelector('.feedback-modal-wrapper').classList.add('modal-show')}function hide_form_feedback(){var e=event||window.event;e.preventDefault();document.querySelector('.feedback-modal-wrapper').classList.remove('modal-show')}})();